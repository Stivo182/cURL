# cURL для 1С:Предприятие 8

## Использование:

- Добавить обработку в конфигурацию
- Установить [cURL](https://curl.se/windows)
- Прописать `curl.exe` в переменные среды Windows. Можно и без этого, но нужно будет вызывать метод `УказатьИсполняемыйФайл` для явного указания `curl.exe`
- Для использования режима эмуляции браузера необходимо наличие сертификата CA `curl-ca-bundle.crt` в папке расположения curl.exe

## Пример использования:

### GET Запрос
```bsl
Json = Обработки.cURL
        .Создать()
        .Get("https://example.com/v1/api")
        .ОтветКакJson());
```

### POST Запрос
```bsl
ДвоичныеДанные = Обработки.cURL
        .Создать()
        .УстановитьЗаголовки(Заголовки)
        .Post("https://example.com/v1/api", Новый Структура("param1, param2", Дата(2020, 1, 1), Истина))
        .ОтветКакДвоичныеДанные());
```

### Перенаправление запроса, если сервер вернул ответ с кодом состояния 3XX

#### Общий случай
```bsl
Обработки.cURL
        .Создать()
        .ПеренаправлятьЗапрос()
        .Get("https://example.com/301.html");
```

#### С аутентификацией
```bsl
Обработки.cURL
        .Создать()
        .ПеренаправлятьЗапрос(, Истина)
        .АутентификацияНаСервере("user", "secret")
        .Get("https://example.com/301.html");
```

#### Без аутентификации
Перенаправление будет выполнено без аутентификации в целях безопасности

```bsl
Обработки.cURL
        .Создать()
        .ПеренаправлятьЗапрос()
        .АутентификацияНаСервере("user", "secret")
        .Get("https://example.com/301.html");
```

### Аутентификация

#### Basic Authentication
```bsl
Обработки.cURL
        .Создать()
        .АутентификацияНаСервере("user", "secret")
        .Get("https://example.com/auth")
```

#### Digest Authentication
```bsl
Обработки.cURL
        .Создать()
        .АутентификацияНаСервереDigest("user", "secret")
        .Get("https://example.com/digest-auth")
```

### Эмуляция браузера (Chrome)
```bsl
HTMLТекст = Обработки.cURL
        .Создать()
        .ЭмуляцияБраузера()
        .Get("https://example.com/page1.html")
        .ОтветКакТекст());
```

### Указать путь к curl.exe
```bsl
curl = Обработки.cURL
        .Создать()
        .УказатьИсполняемыйФайл("path/to/curl.exe");
```
